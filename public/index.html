<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TogetherWeGo - Group Travel Planner</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="style.css" rel="stylesheet">
</head>
<body>
    <!-- Header -->
    <header>
        <div class="header-content">
            <a href="#" class="logo" onclick="showHomePage()">
                <i class="fas fa-plane"></i>
                TogetherWeGo
            </a>
            <div class="nav-buttons">
                <button class="btn btn-ghost" id="loginBtn">
                    <i class="fas fa-sign-in-alt"></i>
                    Login
                </button>
                <button class="btn btn-secondary" id="signupBtn">
                    <i class="fas fa-user-plus"></i>
                    Sign Up
                </button>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main>
        <!-- Home Page -->
        <div id="homePage" class="page-content">
            <!-- Hero Section -->
            <section class="hero">
                <h1>Plan Amazing Trips Together</h1>
                <p>Organize group travels, manage budgets, and create unforgettable memories with your friends and family.</p>
                <button class="btn btn-primary pulse" id="getStartedBtn">
                    <i class="fas fa-rocket"></i>
                    Get Started
                </button>
            </section>

            <!-- Features Grid -->
            <div class="dashboard-grid">
                <div class="stats-card">
                    <i class="fas fa-users"></i>
                    <h3>Group Planning</h3>
                    <p>Create and manage travel groups with ease</p>
                </div>
                <div class="stats-card">
                    <i class="fas fa-map-marked-alt"></i>
                    <h3>Trip Management</h3>
                    <p>Organize destinations, dates, and activities</p>
                </div>
                <div class="stats-card">
                    <i class="fas fa-calculator"></i>
                    <h3>Budget Tracking</h3>
                    <p>Keep track of expenses and split costs fairly</p>
                </div>
            </div>

            <!-- Sample Groups -->
            <div class="card">
                <h2>
                    <i class="fas fa-users"></i>
                    Sample Travel Groups
                </h2>
                <div class="list-container">
                    <div class="list-item">
                        <h4>Beach Lovers Paradise</h4>
                        <p>Planning a trip to Bali • 6 members • Next month</p>
                    </div>
                    <div class="list-item">
                        <h4>Mountain Adventurers</h4>
                        <p>Himalayan trek expedition • 8 members • This summer</p>
                    </div>
                    <div class="list-item">
                        <h4>City Explorers</h4>
                        <p>European city tour • 4 members • Planning phase</p>
                    </div>
                </div>
            </div>

            <!-- Sample Trips -->
            <div class="card">
                <h2>
                    <i class="fas fa-suitcase"></i>
                    Popular Destinations
                </h2>
                <div class="list-container">
                    <div class="list-item">
                        <h4>Tokyo, Japan</h4>
                        <p>7 days • Cultural experience • ₹1,20,000 per person</p>
                    </div>
                    <div class="list-item">
                        <h4>Switzerland</h4>
                        <p>10 days • Alpine adventure • ₹2,50,000 per person</p>
                    </div>
                    <div class="list-item">
                        <h4>Goa, India</h4>
                        <p>5 days • Beach relaxation • ₹25,000 per person</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Login Page -->
        <div id="loginPage" class="page-content hidden">
            <div class="card">
                <h2>
                    <i class="fas fa-sign-in-alt"></i>
                    Welcome Back
                </h2>
                <p style="color: var(--text-secondary); margin-bottom: 2rem;">Sign in to continue planning your amazing trips</p>
                <form id="login-form">
                    <div class="form-group">
                        <label for="email">
                            <i class="fas fa-envelope"></i>
                            Email Address
                        </label>
                        <input type="email" id="email" name="email" class="form-input" required placeholder="Enter your email">
                    </div>
                    <button type="submit" class="btn btn-primary" style="width: 100%;">
                        <i class="fas fa-sign-in-alt"></i>
                        <span>Sign In</span>
                        <div class="loading" id="loginLoading" style="display: none;"></div>
                    </button>
                </form>
                <div style="text-align: center; margin-top: 2rem; color: var(--text-secondary);">
                    Don't have an account? 
                    <a href="#" style="color: var(--primary-color); text-decoration: none; font-weight: 600;" onclick="showSignupPage()">
                        Sign up here
                    </a>
                </div>
            </div>
        </div>

        <!-- Signup Page -->
        <div id="signupPage" class="page-content hidden">
            <div class="card">
                <h2>
                    <i class="fas fa-user-plus"></i>
                    Create Account
                </h2>
                <p style="color: var(--text-secondary); margin-bottom: 2rem;">Join TogetherWeGo and start planning amazing trips</p>
                <form id="signup-form">
                    <div class="form-group">
                        <label for="name">
                            <i class="fas fa-user"></i>
                            Full Name
                        </label>
                        <input type="text" id="name" name="name" class="form-input" required placeholder="Enter your full name">
                    </div>
                    <div class="form-group">
                        <label for="signup-email">
                            <i class="fas fa-envelope"></i>
                            Email Address
                        </label>
                        <input type="email" id="signup-email" name="email" class="form-input" required placeholder="Enter your email">
                    </div>
                    <button type="submit" class="btn btn-primary" style="width: 100%;">
                        <i class="fas fa-user-plus"></i>
                        <span>Create Account</span>
                        <div class="loading" id="signupLoading" style="display: none;"></div>
                    </button>
                </form>
                <div style="text-align: center; margin-top: 2rem; color: var(--text-secondary);">
                    Already have an account? 
                    <a href="#" style="color: var(--primary-color); text-decoration: none; font-weight: 600;" onclick="showLoginPage()">
                        Sign in here
                    </a>
                </div>
            </div>
        </div>

        <!-- Dashboard Page -->
        <div id="dashboardPage" class="page-content hidden">
            <div class="hero">
                <h1>Welcome Back!</h1>
                <p>Manage your trips, groups, and travel plans all in one place.</p>
                <button class="btn btn-primary" onclick="showQuickActionModal()">
                    <i class="fas fa-plus"></i>
                    Quick Actions
                </button>
            </div>

            <div class="dashboard-grid">
                <div class="stats-card">
                    <i class="fas fa-users"></i>
                    <h3 id="groupCount">0</h3>
                    <p>Active Groups</p>
                </div>
                <div class="stats-card">
                    <i class="fas fa-map-marked-alt"></i>
                    <h3 id="tripCount">0</h3>
                    <p>Planned Trips</p>
                </div>
                <div class="stats-card">
                    <i class="fas fa-dollar-sign"></i>
                    <h3 id="totalBudget">₹0</h3>
                    <p>Total Budget</p>
                </div>
            </div>

            <div class="card">
                <h2>
                    <i class="fas fa-users"></i>
                    My Groups
                </h2>
                <div id="groupsList">
                    <!-- Groups will be loaded here -->
                </div>
                <button class="btn btn-primary" onclick="showCreateGroupModal()">
                    <i class="fas fa-plus"></i>
                    Create New Group
                </button>
            </div>

            <div class="card">
                <h2>
                    <i class="fas fa-suitcase"></i>
                    My Trips
                </h2>
                <div id="tripsList">
                    <!-- Trips will be loaded here -->
                </div>
                <button class="btn btn-secondary" onclick="showCreateTripModal()">
                    <i class="fas fa-plus"></i>
                    Plan New Trip
                </button>
            </div>
        </div>
    </main>

    <!-- Floating Action Button -->
    <button class="fab" id="fabBtn" onclick="showQuickActionModal()">
        <i class="fas fa-plus"></i>
    </button>

    <!-- Modals -->
    <!-- Quick Action Modal -->
    <div class="modal-overlay" id="quickActionModal">
        <div class="modal">
            <div class="modal-header">
                <h3>Quick Actions</h3>
                <button class="modal-close" onclick="closeModal('quickActionModal')">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <button class="btn btn-primary" style="width: 100%; margin-bottom: 1rem;" onclick="showCreateGroupModal()">
                    <i class="fas fa-users"></i>
                    Create New Group
                </button>
                <button class="btn btn-secondary" style="width: 100%;" onclick="showCreateTripModal()">
                    <i class="fas fa-plane"></i>
                    Plan New Trip
                </button>
            </div>
        </div>
    </div>

    <!-- Create Group Modal -->
    <div class="modal-overlay" id="createGroupModal">
        <div class="modal">
            <div class="modal-header">
                <h3>Create New Group</h3>
                <button class="modal-close" onclick="closeModal('createGroupModal')">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <form id="createGroupForm">
                    <div class="form-group">
                        <label for="groupNameInput">Group Name</label>
                        <input type="text" id="groupNameInput" class="form-input" required placeholder="Enter group name">
                    </div>
                    <div class="form-group">
                        <label for="groupDescInput">Description</label>
                        <input type="text" id="groupDescInput" class="form-input" placeholder="Enter group description">
                    </div>
                    <button type="submit" class="btn btn-primary" style="width: 100%;">
                        <i class="fas fa-plus"></i>
                        Create Group
                    </button>
                </form>
            </div>
        </div>
    </div>

    <!-- Create Trip Modal -->
    <div class="modal-overlay" id="createTripModal">
        <div class="modal">
            <div class="modal-header">
                <h3>Plan New Trip</h3>
                <button class="modal-close" onclick="closeModal('createTripModal')">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <form id="createTripForm">
                    <div class="form-group">
                        <label for="tripNameInput">Trip Name</label>
                        <input type="text" id="tripNameInput" class="form-input" required placeholder="Enter trip name">
                    </div>
                    <div class="form-group">
                        <label for="tripDestinationInput">Destination</label>
                        <input type="text" id="tripDestinationInput" class="form-input" required placeholder="Enter destination">
                    </div>
                    <div class="form-group">
                        <label for="tripStartDate">Start Date</label>
                        <input type="date" id="tripStartDate" class="form-input" required>
                    </div>
                    <div class="form-group">
                        <label for="tripEndDate">End Date</label>
                        <input type="date" id="tripEndDate" class="form-input" required>
                    </div>
                    <div class="form-group">
                        <label for="tripBudgetInput">Budget (₹)</label>
                        <input type="number" id="tripBudgetInput" class="form-input" placeholder="Enter budget">
                    </div>
                    <div class="form-group">
                        <label for="tripGroupSelect">Select Group</label>
                        <select id="tripGroupSelect" class="form-input">
                            <option value="">Select a group (optional)</option>
                        </select>
                    </div>
                    <button type="submit" class="btn btn-primary" style="width: 100%;">
                        <i class="fas fa-plane"></i>
                        Create Trip
                    </button>
                </form>
            </div>
        </div>
    </div>

    <script>
        // Global variables for in-memory storage
        let userData = null;
        let userGroups = [];
        let userTrips = [];

        // Page navigation functions
        function showHomePage() {
            hideAllPages();
            document.getElementById('homePage').classList.remove('hidden');
            updateNavButtons(false);
        }

        function showLoginPage() {
            hideAllPages();
            document.getElementById('loginPage').classList.remove('hidden');
            updateNavButtons(true);
        }

        function showSignupPage() {
            hideAllPages();
            document.getElementById('signupPage').classList.remove('hidden');
            updateNavButtons(true);
        }

        function showDashboardPage() {
            hideAllPages();
            document.getElementById('dashboardPage').classList.remove('hidden');
            updateNavButtons(true);
            loadDashboardData();
        }

        function hideAllPages() {
            const pages = document.querySelectorAll('.page-content');
            pages.forEach(page => {
                page.classList.add('hidden');
            });
        }

        function updateNavButtons(isLoggedIn) {
            const loginBtn = document.getElementById('loginBtn');
            const signupBtn = document.getElementById('signupBtn');
            
            if (isLoggedIn) {
                loginBtn.innerHTML = '<i class="fas fa-sign-out-alt"></i> Logout';
                loginBtn.onclick = logout;
                signupBtn.style.display = 'none';
            } else {
                loginBtn.innerHTML = '<i class="fas fa-sign-in-alt"></i> Login';
                loginBtn.onclick = showLoginPage;
                signupBtn.style.display = 'inline-flex';
            }
        }

        function logout() {
            userData = null;
            userGroups = [];
            userTrips = [];
            showHomePage();
        }

        // Modal functions
        function showQuickActionModal() {
            document.getElementById('quickActionModal').classList.add('active');
        }

        function showCreateGroupModal() {
            closeModal('quickActionModal');
            document.getElementById('createGroupModal').classList.add('active');
        }

        function showCreateTripModal() {
            closeModal('quickActionModal');
            loadGroupsForTripCreation();
            document.getElementById('createTripModal').classList.add('active');
        }

        function closeModal(modalId) {
            document.getElementById(modalId).classList.remove('active');
        }

        // Load dashboard data
        function loadDashboardData() {
            loadGroups();
            loadTrips();
            updateDashboardStats();
        }

        // Load groups for trip creation
        function loadGroupsForTripCreation() {
            const groupSelect = document.getElementById('tripGroupSelect');
            groupSelect.innerHTML = '<option value="">Select a group (optional)</option>';
            
            userGroups.forEach(group => {
                const option = document.createElement('option');
                option.value = group.id;
                option.textContent = group.name;
                groupSelect.appendChild(option);
            });
        }

        // Load groups
        function loadGroups() {
            const groupsList = document.getElementById('groupsList');
            
            if (userGroups.length === 0) {
                groupsList.innerHTML = '<p>No groups found. Create your first group to get started!</p>';
                return;
            }

            groupsList.innerHTML = userGroups.map(group => `
                <div class="list-item">
                    <h4>${group.name}</h4>
                    <p>${group.description || 'No description'}</p>
                    <small>Created: ${group.created_at}</small>
                </div>
            `).join('');
        }

        // Load trips
        function loadTrips() {
            const tripsList = document.getElementById('tripsList');
            
            if (userTrips.length === 0) {
                tripsList.innerHTML = '<p>No trips found. Plan your first trip to get started!</p>';
                return;
            }

            tripsList.innerHTML = userTrips.map(trip => `
                <div class="list-item">
                    <h4>${trip.name}</h4>
                    <p><strong>Destination:</strong> ${trip.destination}</p>
                    <p><strong>Dates:</strong> ${trip.start_date} - ${trip.end_date}</p>
                    <p><strong>Budget:</strong> ₹${trip.budget || 'Not set'}</p>
                    <small>Created: ${trip.created_at}</small>
                </div>
            `).join('');
        }

        // Update dashboard stats
        function updateDashboardStats() {
            document.getElementById('groupCount').textContent = userGroups.length;
            document.getElementById('tripCount').textContent = userTrips.length;
            
            const totalBudget = userTrips.reduce((sum, trip) => sum + (trip.budget || 0), 0);
            document.getElementById('totalBudget').textContent = `₹${totalBudget.toLocaleString()}`;
        }

        // Initialize the page when DOM is fully loaded
        document.addEventListener('DOMContentLoaded', () => {
            // Get started button event
            document.getElementById('getStartedBtn').addEventListener('click', showSignupPage);
            
            // Signup button event
            document.getElementById('signupBtn').addEventListener('click', showSignupPage);
            
            // FAB button event
            document.getElementById('fabBtn').addEventListener('click', showQuickActionModal);
            
            // Close modal when clicking outside
            document.addEventListener('click', (e) => {
                if (e.target.classList.contains('modal-overlay')) {
                    e.target.classList.remove('active');
                }
            });
            
            // Login form submission
            document.getElementById('login-form').addEventListener('submit', async (e) => {
                e.preventDefault();
                const email = document.getElementById('email').value;
                
                const loginLoading = document.getElementById('loginLoading');
                const submitBtn = e.target.querySelector('button[type="submit"]');
                const submitText = submitBtn.querySelector('span');
                
                // Show loading state
                loginLoading.style.display = 'inline-block';
                submitText.style.display = 'none';
                submitBtn.disabled = true;
                
                try {
                    // Simulate API call
                    await new Promise(resolve => setTimeout(resolve, 1000));
                    
                    // Store user data in memory
                    userData = { 
                        user_id: 'user_' + Date.now(), 
                        email: email,
                        name: email.split('@')[0]
                    };
                    
                    // Initialize with sample data
                    userGroups = [
                        {
                            id: 'group_1',
                            name: 'Beach Lovers',
                            description: 'Planning beach trips',
                            created_at: new Date().toLocaleDateString()
                        }
                    ];
                    
                    userTrips = [
                        {
                            id: 'trip_1',
                            name: 'Goa Trip',
                            destination: 'Goa, India',
                            start_date: '2025-08-15',
                            end_date: '2025-08-20',
                            budget: 25000,
                            group_id: 'group_1',
                            created_at: new Date().toLocaleDateString()
                        }
                    ];
                    
                    // Show success message
                    alert('Login successful!');
                    
                    // Navigate to dashboard
                    showDashboardPage();
                    
                } catch (error) {
                    console.error('Error during login:', error);
                    alert('Login failed. Please try again.');
                } finally {
                    // Reset loading state
                    loginLoading.style.display = 'none';
                    submitText.style.display = 'inline';
                    submitBtn.disabled = false;
                }
            });
            
            // Signup form submission
            document.getElementById('signup-form').addEventListener('submit', async (e) => {
                e.preventDefault();
                const name = document.getElementById('name').value;
                const email = document.getElementById('signup-email').value;
                
                const signupLoading = document.getElementById('signupLoading');
                const submitBtn = e.target.querySelector('button[type="submit"]');
                const submitText = submitBtn.querySelector('span');
                
                // Show loading state
                signupLoading.style.display = 'inline-block';
                submitText.style.display = 'none';
                submitBtn.disabled = true;
                
                try {
                    // Simulate API call
                    await new Promise(resolve => setTimeout(resolve, 1000));
                    
                    // Store user data in memory
                    userData = { 
                        user_id: 'user_' + Date.now(), 
                        email: email, 
                        name: name 
                    };
                    
                    // Initialize empty arrays for new user
                    userGroups = [];
                    userTrips = [];
                    
                    // Show success message
                    alert('Account created successfully!');
                    
                    // Navigate to dashboard
                    showDashboardPage();
                    
                } catch (error) {
                    console.error('Error during signup:', error);
                    alert('Signup failed. Please try again.');
                } finally {
                    // Reset loading state
                    signupLoading.style.display = 'none';
                    submitText.style.display = 'inline';
                    submitBtn.disabled = false;
                }
            });

            // Create Group form submission
            document.getElementById('createGroupForm').addEventListener('submit', async (e) => {
                e.preventDefault();
                const groupName = document.getElementById('groupNameInput').value;
                const groupDesc = document.getElementById('groupDescInput').value;
                
                if (!userData) {
                    alert('Please login first');
                    return;
                }
                
                try {
                    // Simulate API call
                    await new Promise(resolve => setTimeout(resolve, 500));
                    
                    // Create new group
                    const newGroup = {
                        id: 'group_' + Date.now(),
                        name: groupName,
                        description: groupDesc,
                        created_at: new Date().toLocaleDateString(),
                        user_id: userData.user_id
                    };
                    
                    userGroups.push(newGroup);
                    
                    // Show success message
                    alert('Group created successfully!');
                    
                    // Close modal and refresh dashboard
                    closeModal('createGroupModal');
                    loadDashboardData();
                    
                    // Reset form
                    document.getElementById('createGroupForm').reset();
                    
                } catch (error) {
                    console.error('Error creating group:', error);
                    alert('Failed to create group. Please try again.');
                }
            });

            // Create Trip form submission
            document.getElementById('createTripForm').addEventListener('submit', async (e) => {
                e.preventDefault();
                const tripName = document.getElementById('tripNameInput').value;
                const destination = document.getElementById('tripDestinationInput').value;
                const startDate = document.getElementById('tripStartDate').value;
                const endDate = document.getElementById('tripEndDate').value;
                const budget = document.getElementById('tripBudgetInput').value;
                const groupId = document.getElementById('tripGroupSelect').value;
                
                if (!userData) {
                    alert('Please login first');
                    return;
                }
                
                // Validate dates
                if (new Date(startDate) >= new Date(endDate)) {
                    alert('End date must be after start date');
                    return;
                }
                
                try {
                    // Simulate API call
                    await new Promise(resolve => setTimeout(resolve, 500));
                    
                    // Create new trip
                    const newTrip = {
                        id: 'trip_' + Date.now(),
                        name: tripName,
                        destination: destination,
                        start_date: startDate,
                        end_date: endDate,
                        budget: budget ? parseInt(budget) : null,
                        group_id: groupId || null,
                        user_id: userData.user_id,
                        created_at: new Date().toLocaleDateString()
                    };
                    
                    userTrips.push(newTrip);
                    
                    // Show success message
                    alert('Trip created successfully!');
                    
                    // Close modal and refresh dashboard
                    closeModal('createTripModal');
                    loadDashboardData();
                    
                    // Reset form
                    document.getElementById('createTripForm').reset();
                    
                } catch (error) {
                    console.error('Error creating trip:', error);
                    alert('Failed to create trip. Please try again.');
                }
            });
            
            // Initialize the page
            showHomePage();
        });
    </script>
</body>
</html>